<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>ZarinaClient</title>
		<style>
			body {
			 background-color: #1b0f2f; /* Darker purple background */
			 color: #d1c6d5; /* Light text color */
			 font-family: "Courier New", Courier, monospace;
			 display: flex;
			 flex-direction: row;
			 justify-content: center;
			 align-items: center;
			 height: 100vh;
			 margin: 0;
			 overflow: hidden;
			}
			h1 {
			 font-size: 3em;
			 margin-bottom: 20px;
			 color: #d1c6d5;
			 text-shadow: 0 0 10px #9a8cb8, 0 0 20px #9a8cb8; /* Darker text shadow */
			 position: absolute; /* Position above the menus */
			 top: 20px;
			}
			.container {
			 background: rgba(255, 255, 255, 0.1); /* More opaque background */
			 padding: 20px;
			 border-radius: 10px;
			 box-shadow: 0 0 15px #9a8cb8, 0 0 25px #8b7ca8; /* Darker purple shadow */
			 text-align: center;
			 margin-bottom: 0px;
			 width: 400px; /* Set a width for the container */
			 height: 400px; /* Set a fixed height for consistency */
			}
			.button {
			 background-color: #4a3b6e; /* Darker purple */
			 border: none;
			 color: white;
			 padding: 15px; /* Increased padding for better stretch */
			 text-align: center;
			 font-size: 18px;
			 cursor: pointer;
			 border-radius: 10px;
			 box-shadow: 0 0 10px #9a8cb8;
			 transition: all 0.2s ease;
			 width: calc(50% - 5px); /* Stretch buttons to half width with margin */
			 margin: 5px; /* Space between buttons */
			}
			.button:hover {
			 background-color: #9076a3; /* Lighter purple on hover */
			 box-shadow: 0 0 20px #9a8cb8, 0 0 25px #8b7ca8;
			}
			.input {
			 padding: 10px;
			 border-radius: 10px;
			 border: 2px solid #4a3b6e; /* Match input border with button color */
			 background-color: #e1d0e6; /* Darker input background */
			 color: #1b0f2f; /* Dark text for contrast */
			 font-size: 18px;
			 text-align: center;
			 margin: 15px 0; /* Space above and below */
			 width: calc(100% - 10px); /* Stretch input to full width with margin */
			 box-sizing: border-box; /* Include padding and border in element's total width and height */
			}
			.input:focus {
			 outline: none;
			 box-shadow: 0 0 10px #9a8cb8; /* Focus shadow */
			}
			.settings {
			 background: rgba(255, 255, 255, 0.1); /* More opaque background */
			 padding: 20px;
			 border-radius: 10px;
			 box-shadow: 0 0 15px #9a8cb8, 0 0 25px #8b7ca8; /* Darker purple shadow */
			 width: 400px; /* Match width with container */
			 margin-left: 25px;
			 display: flex; /* Ensure settings div is flexible */
			 flex-direction: column; /* Stack elements vertically */
			 align-items: stretch; /* Align items to stretch to full width */
			 height: 400px; /* Fixed height for consistency */
			}
			.tabs {
			 display: flex;
			 justify-content: space-between;
			 margin-bottom: 15px;
			}
			.tabs button {
			 background-color: transparent;
			 border: none;
			 color: #d1c6d5; /* Light text color */
			 font-weight: bold;
			 cursor: pointer;
			 font-size: 16px;
			 flex: 1; /* Make tabs equal width */
			 text-align: center; /* Center text */
			}
			.tabs button.active {
			 border-bottom: 2px solid #9a8cb8; /* Active tab underline */
			}
			.tab-content {
			 display: none;
			 width: 100%; /* Ensure tab content is full width */
			}
			.tab-content.active {
			 display: block;
			}
			.settings label {
			 display: flex;
			 justify-content: space-between;
			 margin: 10px 0;
			 font-size: 16px;
			 color: #d1c6d5; /* Light text color */
			}
			.dropdown {
			 width: 150px;
			 border-radius: 10px;
			 background-color: #e1d0e6; /* Darker dropdown background */
			 color: #1b0f2f; /* Dark text for contrast */
			 border: 2px solid #4a3b6e; /* Match border color */
			}
			input[type="checkbox"] {
			 appearance: none;
			 width: 20px;
			 height: 20px;
			 border: 2px solid #4a3b6e; /* Match checkbox border color */
			 border-radius: 5px;
			 position: relative;
			 cursor: pointer;
			 background: #e1d0e6; /* Darker checkbox background */
			 transition: background 0.3s, border-color 0.3s;
			}
			input[type="checkbox"]:checked {
			 background: #4a3b6e; /* Match checkbox color */
			 border-color: #9a8cb8; /* Lighter border on checked */
			}
			input[type="checkbox"]:checked::after {
			 content: "";
			 position: absolute;
			 top: 3px;
			 left: 3px;
			 width: 10px;
			 height: 10px;
			 background: white;
			 border-radius: 2px;
			}
			.apply-settings {
			 text-align: center;
			 margin-top: 20px;
			}
			.version {
			 position: absolute; /* Position in bottom left corner */
			 bottom: 20px; /* Space from bottom */
			 left: 20px; /* Space from left */
			 font-size: 14px; /* Smaller font size */
			 color: #d1c6d5; /* Default color for version */
			}
			.version.error {
			 color: red; /* Red color for outdated version */
			}
		</style>
	</head>
	<body>
		<h1>ZarinaClient Game Hub</h1>
		<div class="container">
			<div style="display: flex; justify-content: space-between;">
				<button class="button" onclick="play()">Play</button>
				<button class="button" onclick="window.location.href='https://ev.io/user/login'">Login</button>
			</div>
			<input type="text" id="lobbyId" class="input" placeholder="Enter Lobby ID" />
			<button class="button" style="width: calc(100% - 10px);" onclick="joinGame()">Join Game</button>
		</div>
		<div class="settings">
			<div class="tabs">
				<button class="tablinks active" onclick="openTab(event, 'mods')">Mods</button>
				<button class="tablinks" onclick="openTab(event, 'threejs')">Three.js</button>
			</div>
			<div id="mods" class="tab-content active">
				<label>
					Anti Join

					<input type="checkbox" id="statushack" />
				</label>
				<label>
					Anti Fog

					<input type="checkbox" id="foghack" />
				</label>
				<label>
					Packet Sync

					<input type="checkbox" id="packetsync" />
				</label>
				<label>
					Force Crosshair

					<input type="checkbox" id="crosshairhack" />
				</label>
			</div>
			<div id="threejs" class="tab-content">
				<label>
					Alpha

					<input type="checkbox" id="alpha" />
				</label>
				<label>
					Antialias

					<input type="checkbox" id="antialias" />
				</label>
				<label>
					Stencil

					<input type="checkbox" id="stencil" />
				</label>
				<label>
					Preserve Drawing Buffer

					<input type="checkbox" id="preserveDrawingBuffer" />
				</label>
				<label style="justify-content: space-between;">
					Power Preference:

					<select id="powerPreference" class="dropdown">
						<option value="default">Default</option>
						<option value="high-performance">High Performance</option>
						<option value="low-power">Low Power</option>
					</select>
				</label>
				<label>
					Fail If Major Performance Caveat

					<input type="checkbox" id="failIfMajorPerformanceCaveat" />
				</label>
				<label style="justify-content: space-between;">
					Precision:

					<select id="precision" class="dropdown">
						<option value="highp">High Precision</option>
						<option value="mediump">Medium Precision</option>
						<option value="lowp">Low Precision</option>
					</select>
				</label>
				<label>
					PremultipliedAlpha

					<input type="checkbox" id="premultipliedAlpha" />
				</label>
				<label>
					Logarithmic Depth Buffer

					<input type="checkbox" id="logarithmicDepthBuffer" />
				</label>
				<label style="justify-content: space-between;">
					ShadowMapping:

					<select id="ShadowMapping" class="dropdown">
						<option value="off">Off</option>
						<option value="Basic">Basic</option>
						<option value="PCF">PCF (default)</option>
						<option value="PCFSoft">PCF Soft</option>
						<option value="VSM">VSM</option>
					</select>
				</label>
				<label style="justify-content: space-between;">
					ToneMapping:
					<select id="ToneMapping" class="dropdown">
						<option value="off">Off</option>
						<option value="Linear">Linear</option>
						<option value="Reinhard">Reinhard</option>
						<option value="Uncharted2">Uncharted2</option>
						<option value="OptimizedCineon">Optimized Cineon</option>
						<option value="ACESFilmic">ACES Filmic</option>
					</select>
				</label>
			</div>
		</div>
		<div class="version" id="versionIndicator">V2.1.0</div>
		<script>
			const currentVersion = "v2.1.0";

			 async function checkVersion() {
			   try {
			     const response = await fetch('https://api.github.com/repos/RedHatMining/ZarinaClient/releases/latest');
			     const data = await response.json();
			     const latestVersion = data.tag_name;

			     const versionElement = document.getElementById('versionIndicator');

			     if (latestVersion !== currentVersion) {
			       versionElement.classList.add('error');
			     }
			   } catch (error) {
			     console.error('Error fetching version:', error);
			   }
			 }
			function play() {
			 const settingsParams = getSettingsParams();
			 window.location.href = `https://ev.io/patch?${settingsParams}`;
			}

			function joinGame() {
			 const lobbyId = document.getElementById("lobbyId").value;
			 const settingsParams = getSettingsParams();
			 if (lobbyId) {
			  window.location.href = `https://ev.io/patch?game=${lobbyId}${settingsParams}`;
			 } else {
			  alert("Please enter a valid Lobby ID.");
			 }
			}

			function getSettingsParams() {
			 const settings = {
			  statushack: document.getElementById("statushack").checked,
			  foghack: document.getElementById("foghack").checked,
			  packetsync: document.getElementById("packetsync").checked,
			  alpha: document.getElementById("alpha").checked,
			  antialias: document.getElementById("antialias").checked,
			  stencil: document.getElementById("stencil").checked,
			  preserveDrawingBuffer: document.getElementById("preserveDrawingBuffer").checked,
			  powerPreference: document.getElementById("powerPreference").value,
			  failIfMajorPerformanceCaveat: document.getElementById("failIfMajorPerformanceCaveat").checked,
			  precision: document.getElementById("precision").value,
			  premultipliedAlpha: document.getElementById("premultipliedAlpha").checked,
			  logarithmicDepthBuffer: document.getElementById("logarithmicDepthBuffer").checked,
			  crosshairhack: document.getElementById("crosshairhack").checked,
			  ToneMap: document.getElementById("ToneMapping").value,
			  ShadowMap: document.getElementById("ShadowMapping").value,
			 };
			 localStorage.setItem("settings", JSON.stringify(settings));
			 return `&patch=true&ToneMap=${settings.ToneMap}&ShadowMap=${settings.ShadowMap}&crosshairhack=${settings.crosshairhack}&statushack=${settings.statushack}&foghack=${settings.foghack}&packetsync=${settings.packetsync}&alpha=${settings.alpha}&antialias=${settings.antialias}&stencil=${settings.stencil}&preserveDrawingBuffer=${settings.preserveDrawingBuffer}&powerPreference=${settings.powerPreference}&failIfMajorPerformanceCaveat=${settings.failIfMajorPerformanceCaveat}&precision=${settings.precision}&premultipliedAlpha=${settings.premultipliedAlpha}&logarithmicDepthBuffer=${settings.logarithmicDepthBuffer}`;
			}

			function openTab(evt, tabName) {
			 const tablinks = document.getElementsByClassName("tablinks");
			 const tabcontent = document.getElementsByClassName("tab-content");
			 for (let i = 0; i < tabcontent.length; i++) {
			  tabcontent[i].classList.remove("active");
			 }
			 for (let i = 0; i < tablinks.length; i++) {
			  tablinks[i].classList.remove("active");
			 }
			 document.getElementById(tabName).classList.add("active");
			 evt.currentTarget.classList.add("active");
			}

			function loadSettings() {
			 const savedSettings = JSON.parse(localStorage.getItem("settings"));
			 if (savedSettings) {
			  document.getElementById("statushack").checked = savedSettings.statushack;
			  document.getElementById("foghack").checked = savedSettings.foghack;
			  document.getElementById("packetsync").checked = savedSettings.packetsync;
			  document.getElementById("alpha").checked = savedSettings.alpha;
			  document.getElementById("antialias").checked = savedSettings.antialias;
			  document.getElementById("stencil").checked = savedSettings.stencil;
			  document.getElementById("preserveDrawingBuffer").checked = savedSettings.preserveDrawingBuffer;
			  document.getElementById("powerPreference").value = savedSettings.powerPreference;
			  document.getElementById("failIfMajorPerformanceCaveat").checked = savedSettings.failIfMajorPerformanceCaveat;
			  document.getElementById("precision").value = savedSettings.precision;
			  document.getElementById("premultipliedAlpha").checked = savedSettings.premultipliedAlpha;
			  document.getElementById("logarithmicDepthBuffer").checked = savedSettings.logarithmicDepthBuffer;
			  document.getElementById("crosshairhack").checked = savedSettings.crosshairhack;
			  document.getElementById("ToneMapping").value = savedSettings.ToneMap;
			  document.getElementById("ShadowMapping").value = savedSettings.ShadowMap;
			 }
			}

			window.onload = () => {
			 loadSettings();
			 checkVersion();
			};
		</script>
	</body>
</html>
